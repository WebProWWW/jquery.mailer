
/* author: Timur Valiyev | email: v.timur8484@gmail.com */

(function(){var t,r,n=function(t,r){return function(){return t.apply(r,arguments)}};t=jQuery,r=function(){function r(r,e){this.onSubmit=n(this.onSubmit,this),t.extend(this.settings,e),r.bind("submit",this.onSubmit)}return r.prototype.settings={action:"/",method:"POST",dataType:"json",sendingStr:"Sending...",success:function(t,r){},error:function(t){}},r.prototype.emailRegex=/^[-a-z0-9~!$%^&*_=+}{\'?]+(\.[-a-z0-9~!$%^&*_=+}{\'?]+)*@([a-z0-9_][-a-z0-9_]*(\.[-a-z0-9_]+)*\.(aero|arpa|biz|com|coop|edu|gov|info|int|mil|museum|name|net|org|pro|travel|mobi|[a-z][a-z])|([0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}))(:[0-9]{1,5})?$/i,r.prototype.process=!1,r.prototype.sendingCurrentHtml="",r.prototype.onSubmit=function(r){var n;return r.preventDefault(),n=t(r.target),this.validate(n.find("[validate]"))&&!this.process&&this.send(n),!1},r.prototype.send=function(r){return this.process=!0,this.progress(r),t.ajax({method:this.settings.method,url:this.settings.action,data:r.serialize(),dataType:this.settings.dataType}).done(function(t){return function(n){return t.success(r,n)}}(this)).fail(function(t){return function(){return t.error(r)}}(this)).always(function(t){return function(){return t.process=!1,t.always(r)}}(this)),!0},r.prototype.success=function(t,r){return t.trigger("reset"),this.settings.success(t,r)},r.prototype.error=function(t){return this.settings.error(t)},r.prototype.always=function(t){var r;return r=t.find(".js-mailer-progress"),r.html(this.sendingCurrentHtml),!0},r.prototype.progress=function(t){var r;return r=t.find(".js-mailer-progress"),this.sendingCurrentHtml=r.html(),r.html(this.settings.sendingStr),!0},r.prototype.inputError=function(r){var n;return n=r.parent(),n.addClass("has-error"),r.one("focusin",function(r){return t(this).parent().removeClass("has-error")}),!0},r.prototype.validate=function(r){var n;return n=!0,r.each(function(r){return function(e,i){var s,o,u,a;return s=t(i),a=s.attr("validate"),u=s.val(),o=function(){switch(a){case"text":return u.length>2;case"email":return this.emailRegex.test(u);default:return!0}}.call(r),o||(n=o,r.inputError(s)),!0}}(this)),n},r}(),t.fn.extend({mailer:function(t){return new r(this,t)}})}).call(this);